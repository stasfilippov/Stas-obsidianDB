# Рекурсии

Изучено: Yes

**Рекурсия** – это приём программирования, полезный в ситуациях, когда задача может быть естественно разделена на несколько аналогичных, но более простых задач

- в теле функции могут быть вызваны другие функции для выполнения подзадач.
- Частный случай подвызова – когда **функция вызывает *сама себя*.** Это как раз и называется *рекурсией*.

*Требования рекурсии:* 

1. **База рекурсии**, или **терминальный сценарий**, или терминальное условие. Простыми словами, **когда остановиться.** В нашем примере это был 0: мы остановили вычисление факториала, когда достигли 0.
2. **Шаг рекурсии.** Правило передвижения по рекурсии, углубление. В нашем случае, это было `n * factorial(n-1)`. Общее количество вложенных вызовов (включая первый) называют *глубиной рекурсии*. 

```jsx
function pow(x, n) {
  if (n == 1) {
    return x;
  } else {
    return x * pow(x, n - 1);
  }
}

alert( pow(2, 3) ); // 8
```

Таким образом, функция `pow` *рекурсивно вызывает саму себя* до `n == 1` .

- Можно записать еще короче:
    - Используя условный оператор `?` вместо `if`, мы можем переписать `pow(x, n)`, делая код функции более лаконичным, но всё ещё легко читаемым:

```jsx
function pow(x, n) {
  return (n == 1) ? x : (x * pow(x, n - 1));
}
```

---

**Контекст выполнения**

- специальная внутренняя структура данных, которая содержит информацию о вызове функции
- Один вызов функции имеет ровно один контекст выполнения
- Когда функция производит вложенный вызов, происходит следующее:
    - Выполнение текущей функции приостанавливается.
    - Контекст выполнения, связанный с ней, запоминается в специальной структуре данных – *стеке контекстов выполнения*.
    - Выполняются вложенные вызовы, для каждого из которых создаётся свой контекст выполнения.
    - После их завершения старый контекст достаётся из стека, и выполнение внешней функции возобновляется с того места, где она была остановлена.
- **Любая рекурсия может быть переделана в цикл. Как правило, вариант с циклом будет эффективнее.**

---

Использование **рекурсивных обходов**

- Принцип прост: для объекта `{...}`используются рекурсивные вызовы, а массивы `[...]`
 являются «листьями» дерева рекурсии, они сразу дают результат.

---

**Рекурсивная структура**

- Рекурсивная (рекурсивно определяемая) структура данных – это структура, которая повторяет саму себя в своих частях.

В HTML-документе *HTML-тег* может содержать:

- Фрагменты текста.
- HTML-комментарии.
- Другие *HTML-теги* (которые, в свою очередь, могут содержать фрагменты текста/комментарии или другие теги и т.д.).

**“Связанный список”**

- если нам действительно нужны быстрые вставка/удаление, мы можем выбрать данную структуру данных

Элемент *связанного списка* определяется рекурсивно как объект с:

- `value`,
- `next` – свойство, ссылающееся на следующий *элемент связанного списка* или `null`, если это последний элемент.